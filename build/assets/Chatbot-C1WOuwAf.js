import{r as l,j as e,h as w,q as j}from"./index-CnOT8Fd6.js";const r={greeting:{text:"Hello! I'm your farming assistant. How can I help you today?",options:[{text:"Crop advice",value:"crop_advice"},{text:"Pest control",value:"pest_control"},{text:"Weather forecast",value:"weather"}]},crop_advice:{text:"I can provide advice on various crops. Which crop would you like to know about?",options:[{text:"Soybean",value:"soybean_advice"},{text:"Groundnut",value:"groundnut_advice"},{text:"Sunflower",value:"sunflower_advice"},{text:"Back to main menu",value:"main_menu"}]},soybean_advice:{text:`ðŸŒ± Soybean Farming Tips:

â€¢ Best grown in well-drained loamy soil with pH 6.0-7.5
â€¢ Requires 600-1000mm rainfall
â€¢ Ideal temperature: 20-30Â°C
â€¢ Sowing time: June-July (Kharif)
â€¢ Harvest in 90-120 days

Would you like to know about pest control for soybeans?`,options:[{text:"Yes, show pest control",value:"soybean_pests"},{text:"Back to crops",value:"crop_advice"}]},pest_control:{text:"I can help with pest control for various crops. Which pest are you dealing with?",options:[{text:"Aphids",value:"aphids"},{text:"Bollworms",value:"bollworms"},{text:"Whiteflies",value:"whiteflies"},{text:"Back to main menu",value:"main_menu"}]},main_menu:{text:"What would you like to know about?",options:[{text:"Crop advice",value:"crop_advice"},{text:"Pest control",value:"pest_control"},{text:"Weather forecast",value:"weather"}]}},v=["I'm not sure I understand. Could you rephrase that?","I'm still learning about that topic. Could you ask something else?","Let me connect you with a human expert for that question.","I don't have that information right now. Try asking about crop advice or pest control."],_=()=>{const[i,c]=l.useState([{text:r.greeting.text,sender:"bot",options:r.greeting.options}]),[u,x]=l.useState(""),[m,d]=l.useState(!1),h=l.useRef(null);l.useEffect(()=>{var t;(t=h.current)==null||t.scrollIntoView({behavior:"smooth"})},[i]);const f=()=>v[Math.floor(Math.random()*v.length)],b=t=>{if(t.preventDefault(),!u.trim())return;const n={text:u,sender:"user"};c(s=>[...s,n]),x(""),d(!0),setTimeout(()=>{const s=g(u);c(o=>[...o,s]),d(!1)},1e3)},y=t=>{var s;const n=(s=i[i.length-1].options)==null?void 0:s.find(o=>o.value===t);if(n){const o={text:n.text,sender:"user"};c(a=>[...a,o]),d(!0),setTimeout(()=>{const a=g(t);c(p=>[...p,a]),d(!1)},1e3)}},g=t=>{const n=t.toLowerCase();let s;if(n.includes("hello")||n.includes("hi")||n.includes("hey"))s=r.greeting;else if(n.includes("crop")||n.includes("plant")||n.includes("grow"))s=r.crop_advice;else if(n.includes("pest")||n.includes("insect")||n.includes("bug"))s=r.pest_control;else if(n.includes("soybean")||n.includes("soya"))s=r.soybean_advice;else if(n.includes("menu")||n.includes("back"))s=r.main_menu;else{const o=[...i].reverse().find(a=>a.sender==="bot");if(o!=null&&o.options){const a=o.options.find(p=>p.value===t||p.text.toLowerCase()===t.toLowerCase());a&&(s=r[a.value]||{text:f()})}}return s||(s={text:f()}),{text:s.text,sender:"bot",options:s.options,timestamp:new Date().toISOString()}};return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-120px)] bg-gray-50 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"bg-green-600 text-white p-4 flex items-center",children:[e.jsx("div",{className:"bg-white text-green-600 p-2 rounded-full mr-3",children:e.jsx(w,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Farming Assistant"}),e.jsx("p",{className:"text-sm text-green-100",children:"Always here to help with your farming needs"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map((t,n)=>e.jsx("div",{className:`flex ${t.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-3/4 rounded-lg p-3 ${t.sender==="user"?"bg-green-600 text-white rounded-br-none":"bg-white border border-gray-200 rounded-bl-none"}`,children:[t.sender==="bot"&&t.text.includes(`
`)?t.text.split(`
`).map((s,o)=>e.jsx("p",{className:o>0?"mt-2":"",children:s},o)):e.jsx("p",{children:t.text}),t.sender==="bot"&&t.options&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:t.options.map((s,o)=>e.jsx("button",{onClick:()=>y(s.value),className:"px-3 py-1 text-sm bg-green-100 hover:bg-green-200 text-green-800 rounded-full transition-colors",children:s.text},o))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.timestamp||new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},n)),m&&e.jsxs("div",{className:"flex items-center space-x-1 p-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("div",{ref:h})]}),e.jsxs("form",{onSubmit:b,className:"border-t border-gray-200 p-4 bg-white",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:u,onChange:t=>x(t.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"bg-green-600 text-white p-2 rounded-full hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:m,children:e.jsx(j,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:e.jsx("span",{children:'Try: "How to grow soybeans?" or "Pest control for my crops"'})})]})]})};export{_ as default};
